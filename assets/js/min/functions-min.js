$(document).ready(function(){function e(e){var a=document.createElement("canvas"),t=a.getContext("2d"),r=new Image;r.src=e,a.width=r.width,a.height=r.height,t.drawImage(r,0,0);for(var i=t.getImageData(0,0,a.width,a.height),o=0;o<i.height;o++)for(var s=0;s<i.width;s++){var n=4*o*i.width+4*s,d=(i.data[n]+i.data[n+1]+i.data[n+2])/3;i.data[n]=d,i.data[n+1]=d,i.data[n+2]=d}return t.putImageData(i,0,0,0,0,i.width,i.height),a.toDataURL()}function a(){var e=navigator.userAgent.toLowerCase();return $.browser.chrome=/chrome/.test(e),$.browser.safari=/webkit/.test(e),$.browser.opera=/opera/.test(e),$.browser.msie=/msie/.test(e)&&!/opera/.test(e),$.browser.mozilla=/mozilla/.test(e)&&!/(compatible|webkit)/.test(e)||/firefox/.test(e),$.browser.chrome?"chrome":$.browser.mozilla?"mozilla":$.browser.opera?"opera":$.browser.safari?"safari":$.browser.msie?"ie":void 0}function t(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var a=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=t.exec(a)&&(e=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var a=navigator.userAgent,t=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=t.exec(a)&&(e=parseFloat(RegExp.$1))}return e}if("opera"==a()||"safari"==a()){var r=$("img"),i=r.length,o=0;r.one("load",function(){o++,o==i&&(grayscale($("img")),$("img").hover(function(){grayscale.reset($(this))},function(){grayscale($(this))}))}).each(function(){this.complete&&$(this).trigger("load")})}t()>=10&&($("img").each(function(){var a=$(this);a.css({position:"absolute"}).wrap("<div class='img_wrapper' style='display: inline-block'>").clone().addClass("img_grayscale").css({position:"absolute","z-index":"5",opacity:"0"}).insertBefore(a).queue(function(){var e=$(this);e.parent().css({width:this.width,height:this.height}),e.dequeue()}),this.src=e(this.src)}),$("img").hover(function(){$(this).parent().find("img:first").stop().animate({opacity:1},200)},function(){$(".img_grayscale").stop().animate({opacity:0},200)})),"mozilla"==a()?$("body").addClass("mozilla"):"ie"==a()?$("body").addClass("ie"):"opera"==a()?$("body").addClass("opera"):"safari"==a()?$("body").addClass("safari"):"chrome"==a()&&$("body").addClass("chrome"),t()>=10&&$("body").addClass("ie11")});